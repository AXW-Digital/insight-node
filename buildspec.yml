---
phases: 
  build: 
    commands: 
      - "echo Build started on `date`"
      - "echo Building the Docker image..."
      - "cd server && docker build -t axw-digital/insight-node ."
      - "cd server && docker tag axw-digital/insight-node 740126133497.dkr.ecr.eu-north-1.amazonaws.com/insight_front"
  post_build: 
    commands: 
      - "echo Build completed on `date`"
      - "echo Pushing the Docker image..."
      - "docker push 740126133497.dkr.ecr.eu-north-1.amazonaws.com/insight_front"
  pre_build: 
    commands: 
      - "echo Logging in to AWS..."
      - "docker login -u AWS -p eyJwYXlsb2FkIjoiUWUzOW5PSFovRmdJbm55bVFrdkJEekR5eDArMHk1amczMUZEK3hxQUN5d2pmcHB2WHROaHdPMExOaG1jbzF3S1RLalA4YTJxSlNxazN2N3V4NmVGSENNbTVIaWRMamhCdHNNUCsvZTBHRENkT1oxdlRLcW9xa1FVTzBGcTNFZFZBaUt1ekhRd3JDaFZubXYvN3AzWFUrV3R1TTRpY1hFMkVXNjFSaEVCWHMyT1k1WHBFUWt4TWdmMVYvQm1VM0FxV3g2WkI0czI3ai85bXBoN1NOL1MwNSt3VitkMDhJOGRVdno2WFl5YTQwVkIzZXExSDZOMnpMdmxRY3BiUm1sZFhpMm5uUnhMbFN3WWlLOW0xM0UyTG5KMXQvWm9SVlB5bncxNUgxYm45aVpFTFFIRVMxZHdMSXNMRkdCUVNHRHdtRlkxKzR3L0FzZEdEZHFtbXpDSlNrZnRvaG1YU2JIb2JOb1M5OVZscmVQK2c2TkRvdXI2VjN0c0VoUjVmazN1Rmt1UzNNMDltWUZGOW9Td3RJYVNNcHBrSTVDSG05aG16MHFGUU5YZ1ZXQUFNb1pidUM5WDJpaDJ4ZG5pbENTaVdjUW1sTjROdjFCbEk5RjdWNFQ5MGhoU3g4SStkSzdSWFpzNE5RRldoRzM0MWY3aE9KbnRGb3hNTUpFaG5Zbk5RdjI2Nm9reEF5Ni9EL0h5UHhOY3VqUTVTRENIWFlyZUdSR2RNdFJCc09wMVB5Umd6YWlndVFGTko2ekxJQ0w5aXFwcjRKNzVPQlU0YVJKUjVoRUNCQkN2K3o0UXBGb1JCWkJRT0tSV0t1a3d2QWlGcVBKZGZHQ2xTUHcyUmdvMW9ZamQ1dk5xdWVaSTBOb2pTakVaalRTdU9DMFVLclJCQnEvVDF6S28yVkNoUjV4OFRTbXJiTkh3R2VjTFJpYXFQRU9OQVVEY0l3bW9EbjFwMGIxMzFHcjRHYTNadmJ2RldtUFgxZVVudWk4RkdMZXNWSEd5ZFVWbDlCOFhBQ2NmTVgyaGQ2ZnoxbEVZR1dPMVFtbG9KUVdsM2RjSzZ1Rlc2cmI0ZWhqYjVyOG1TQXBsb2pBWWhSZURNMEJVOHNFSUJRWEhXMWpPbE0waXZQRGdGVXM2S0JxZWMxZjltVHlHUWZ6UkVmeEZDTDh6QzVUMGorRWpIdWtzaEd4bkZqZ2libEQvcXhQWVNqREJRU1pxS29wMy9pckVsQlBPNHFhUnpHbkoyeGNwS2ZWQlgyWXZZTllNMXFTWkRiL1ltQXMwYWFrNTV6WkdvZ0w2ekRaRjBzeGFCTjBsMGFjSnFjWTliUVRNSzEzZlZsWUNycGI5S3dXeG5Oa1NWTkZKdEtTNFJHZHJmMXhhWDVDemlmYlJ1R2VvVEZjNFRVcnlaUG9iZzJBOVJFMD0iLCJkYXRha2V5IjoiQVFJQkFIaGZyRlEyYUlJd0Y1VmM3OVJIRVBHbmNVV3VyMi9Kek04dC9aem9FdFJyQWdHeEorSmZnRFA3WGZSZWU0dTVsWkI4QUFBQWZqQjhCZ2txaGtpRzl3MEJCd2FnYnpCdEFnRUFNR2dHQ1NxR1NJYjNEUUVIQVRBZUJnbGdoa2dCWlFNRUFTNHdFUVFNZHV0Z1RLbC9pR3JNSVJCWkFnRVFnRHZHWVFrK1F0blJxK2xxV2dLN2pCYUhaTVZ2YnBMSU9ZMU9VeUpsSUpmS2lZU083SzN5YUZra3M0UG9KSk9jVHZQZ0tkbFRzZnhobitMMHRRPT0iLCJ2ZXJzaW9uIjoiMiIsInR5cGUiOiJEQVRBX0tFWSIsImV4cGlyYXRpb24iOjE2NjE5MzEyODZ9 740126133497.dkr.ecr.eu-north-1.amazonaws.com"
artifacts:
  files: 
    - "**/*"
  name: "s3-to-s3-latest-build.zip" 
version: 0.1
