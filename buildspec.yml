---
phases: 
  build: 
    commands: 
      - "echo Build started on `date`"
      - "echo Building the Docker image..."
      - "cd server && docker build -t axw-digital/insight-node ."
      - "cd server && docker tag axw-digital/insight-node 740126133497.dkr.ecr.eu-north-1.amazonaws.com/insight_front"
  post_build: 
    commands: 
      - "echo Build completed on `date`"
      - "echo Pushing the Docker image..."
      - "docker push 740126133497.dkr.ecr.eu-north-1.amazonaws.com/insight_front"
  pre_build: 
    commands: 
      - "echo Logging in to AWS..."
      - "docker login -u AWS -p eyJwYXlsb2FkIjoiRENLVjMvWFlSTTBoYmp4RG5iUTdmd1lzQlhjd1piVDIwc2hNeTBweXg1YW5ieHkxczl2WFIwQWMzUGVjSGhScWN3NXRueDVXQTc4SWVZbmkvdVhZV1FQMzVlWDE0WVVSR1JBWkU3UkhqR3ExTjMxRnV4T3RwK09JZ3Bnd1N1a0RaK3Z0Y1VoRGRXQ0VBSEU2YUhGMVdlVjlUcWE2Sm5jT29aTkVTbytxQVVLMUhXdFRmbVN3b2ZuemdDclBOOHVXSVJqUUdPUlh1a1FuRHcwOFJtWDJJOUM1QXRQTVVraVBWa0xQZTFVQnpSeDZlZjZTTVZEbCtTSHdyM3lWTTVrQkdnOXh2Q3hKSlZsWEtYK1BzeVY2MXY4QlhMZjFKaWJtNmFvWi9ma2krUTU3QnFSeTl2YnlaejVnTitzWXJOdU50bHE3S1duV0VGSSs1K2JBOS9hQ2w2UHgyVlg0UmhqQ0lVK0F0WjRocURSWE1OUTIrcnBWQ3V4a2g4QzUvb1lCeFdpUzZMa29lMzc2MW9hZWw5bXhxMFFES0s3Sm55SEc4VmlXQWk0S2FVQVl1a0dJYk9ZbEhEOUp1bFhoVTNDZVp3bUNXUWFaQmlPQldmbE9TbGIvQnR2M3V1L0NUSkszdE5iYzFXVklESU5NU3VRNmRsL1VnZGZMdkJ1RlFzT3BJS3ptTmRWVzFMblVJSnZWWmdob3liTmh6R0szUFYzajFMZW9sZkVwZEloY2RaU1c2MTErTWlGejhvQjBwWjNpMFc0TVVsbThISzNtUGphLzd6VTRXcGozU2hJSnNLVDRhcXlqWVFGclZzK2NRT3h5a0xlQWxTR0VSNCt4T1pqTFpRaWQ0NFk2ajFZN0Z0djdHNzdRdUMzVDRFN2dPMnNvZGFTNjFsVFVaTStHbk45ak5jdEQvKzZCQ2gwQ1lzeWgwT0daUlVXY1pWL29jOXN6S2xDNjlBVEV4eG9ncjhHbDR5Tk9mUjlTKzdRRjRwMHhvZUtJU0NqUHVuME1pRi9kQzdnNFVjeGlYcWhBay9QNjdIMVJJTlozUHFZN2p0UTd2ZGs5U2VUWUZZRlVGUTB0UUpHNUpNSXRvb3FZN2d1SzBsSkY4cGhRbnZEd0NYNzJvTGZFOEtzbmVvc1doaVZzaXZxcy8veDBUNkhJQUxQY2pGdjlINWNTU2hKZjVTcGJKTHpvQU03WHlZdDQrbXVZMWNKSVg1dTIxV3l1TzQ5b1VlYlFrY1krQ2pGTTJYblhqajJSMkxOZVAzTXBBMWcvaVlpTENYS0xzZHJ4SU1KOGpIb25IZW45UjVTOFJyYUVibFVaeVFHZWJpVVoiLCJkYXRha2V5IjoiQVFJQkFIaGZyRlEyYUlJd0Y1VmM3OVJIRVBHbmNVV3VyMi9Kek04dC9aem9FdFJyQWdFL2dYb2VTNDd3S3EvSE1zQjl1SHRVQUFBQWZqQjhCZ2txaGtpRzl3MEJCd2FnYnpCdEFnRUFNR2dHQ1NxR1NJYjNEUUVIQVRBZUJnbGdoa2dCWlFNRUFTNHdFUVFNV1h2OHNxVUk5ZWRKZndyYkFnRVFnRHREYS9kNlZoQ21TY1VEQzVuZjBJMXkxc3RIOTl4Q0lPWjVHV09NS1VldUVRbEF1UGllUTErOCswZTgvV0hHT2JWa041TTErMng5YW1nOU93PT0iLCJ2ZXJzaW9uIjoiMiIsInR5cGUiOiJEQVRBX0tFWSIsImV4cGlyYXRpb24iOjE2NDQ3ODU3MjF9 740126133497.dkr.ecr.eu-north-1.amazonaws.com"
artifacts:
  files: 
    - "**/*"
  name: "s3-to-s3-latest-build.zip" 
version: 0.1
