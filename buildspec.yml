---
phases: 
  build: 
    commands: 
      - "echo Build started on `date`"
      - "echo Building the Docker image..."
      - "cd server && docker build -t axw-digital/insight-node ."
      - "cd server && docker tag axw-digital/insight-node 740126133497.dkr.ecr.eu-north-1.amazonaws.com/insight_front"
  post_build: 
    commands: 
      - "echo Build completed on `date`"
      - "echo Pushing the Docker image..."
      - "docker push 740126133497.dkr.ecr.eu-north-1.amazonaws.com/insight_front"
  pre_build: 
    commands: 
      - "echo Logging in to AWS..."
      - "docker login -u AWS -p eyJwYXlsb2FkIjoiTHVEa0hTL0RiTDN6WjM0b09GNXFjV1NPZkhIRm9jTGNDNXhVSDJ3TWNmbkg2dUhhZ1U2MVdDalBRS2RlQ040WGtxTUxweWVoOUpOTHZyZmtLbkluZk1mTG9yYWNiQk04OEFZeWI5MlBQN0d0MXVWbE1GazJwQWJ0MmNEdmxIbnJCNDF2SnZiazlKVXpzVEZHdnp3bnI0VnQzTHBHa0ZhYzhsOXlGbC8ra1hEb00rdW9pWWJLaVQ4eDlrcGdZVEZjZEw5ZU0vdXlJR0hGWFdPUWo4b0laUklxZk0zQTFYb0NRU1g5a2VlZTd3SldWQktRU2tUMGpTOC9NUlZnZ21aRXRYcGljU3VWK1RPT1V2VkxMdXQzQW5aMHBCVC9SVUQxK3Ird2NIQ0FTOFBDdzYydGRYcUMwQmdBWDY4WXlRRWJQWVJQbjB4QnM5NEFmbDNIZGZIZTVQMlNFOXlPbDdycHJua0xJVkhEZzMrUHdsY1JKMFFpU3p2VUN6bWNUVXh1M1dvbDZBdTFsNjNLOGtoWlRIdURHTlJoWHc1Mng0YjJLYU5Eb0lDUHU2b3J0dEUwb1czZm8zb1F1ZW9IY29BblprZHcyb0NZd0N0dndRc29MVkxNOTdDYy8ycXZEelVqOTFVSTBxSEFmSFNPVEd1RFVqYUt5b09pWDkxUzg3eWlBS1JMTnJkRUNzdFlKakdIU2RTYW9IMkVKcWM3UGN2THd4LzBtd1R1RXV4R25JSy9mdDR2UVB2Y2MzL1dHcmNCeitJVXc2dWhuR2pLY3FiZUFpeG1OUzlFZFdueTd4UiswbXBPZ0xyaDJpaVc0Z3ZQVTl5TjVVYWFkeGY0a1NCbXhWZW9nREtKcVIrTDdzV2JNSmhET2RVWW5jRGxwMlN0M29UWHNYcFkzM21pK05kMGtKeWpLSUVad0hLZW1DREZMTmE5cFdsWEhSVjBKcGwxREJzSTk4T1BnSTVtWDhCelVnNEQvbmhBTVdid3RoZUI5MUh1czJPOFlhNGlmK0s4eXd5MTFrUWdSNm5JSStXaHJkeFNoWXk5Y1RIb3pGNDJ5aG9hRURPOXgxejZnaHAyNExGS1lvMjUwL3BzdnQ2S0pBWkl5Z2VPN2gvbEQ1N25aR0xRZi9jcUQwS2VJdmtVaC9ZcUpBdVpiTGFNU1EwOWNJQjVlREJLSURwYzRQY1JwNng4emRHWVlwREM0SjNEVUJ5TXNNYWh2NnNvK3FjOWFLTDhReU9sTUVwT25wSHM3ZTdQOFlTM2x5R0hwZTBFQk10NjYwYnpid1pNVlFZMDNkeE9ReE1SY1docko2VktYOUxDN29hMEpJelVNWmVGeVFCUnA5SWJUREtOZ0pHTTBTZzFaZm5YTkhWeG4rOEFVVXhwdG1JPSIsImRhdGFrZXkiOiJBUUlCQUhoZnJGUTJhSUl3RjVWYzc5UkhFUEduY1VXdXIyL0p6TTh0L1p6b0V0UnJBZ0ZQT3ZBbHIwd2Q3eTl3cmtMUkFZMU9BQUFBZmpCOEJna3Foa2lHOXcwQkJ3YWdiekJ0QWdFQU1HZ0dDU3FHU0liM0RRRUhBVEFlQmdsZ2hrZ0JaUU1FQVM0d0VRUU1TY0dOeThqMFV3TzN0b0gzQWdFUWdEdDRmNXZSeXNzR25HVjJOMUZlNlpxenI1SkRLVytrNTZaTkxhKy9NZllUSXdoNkZZS0hlNWdBMUhxTXZFTkN2NXVtUFNGK2FBVkJDRkppUVE9PSIsInZlcnNpb24iOiIyIiwidHlwZSI6IkRBVEFfS0VZIiwiZXhwaXJhdGlvbiI6MTY0NjY4NjI3MX0= 740126133497.dkr.ecr.eu-north-1.amazonaws.com"
artifacts:
  files: 
    - "**/*"
  name: "s3-to-s3-latest-build.zip" 
version: 0.1
