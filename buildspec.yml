---
phases: 
  build: 
    commands: 
      - "echo Build started on `date`"
      - "echo Building the Docker image..."
      - "cd server && docker build -t axw-digital/insight-node ."
      - "cd server && docker tag axw-digital/insight-node 740126133497.dkr.ecr.eu-north-1.amazonaws.com/insight_front"
  post_build: 
    commands: 
      - "echo Build completed on `date`"
      - "echo Pushing the Docker image..."
      - "docker push 740126133497.dkr.ecr.eu-north-1.amazonaws.com/insight_front"
  pre_build: 
    commands: 
      - "echo Logging in to AWS..."
      - "docker login -u AWS -p eyJwYXlsb2FkIjoiNWRqbHJoNXRHZHhwSGV0ODVVbnFWNXRvbGpJRnZidFdoN0pjbiszSmMvY0JFNTBTZU5ITTZWNTV1c3lMVzMzaHJ2dWg2UUkxNHc4Y3NZcTN3bHdJU0hybmVzWTFlQk9SQXYrZ3ovTnlxWUQwbzkwb28zVmhjVFhIa3RYMVdmMk1rR3ZZWGRQcUFrUEpUc1orZjByTm05U3RmS0NPUzdZMmNHTGxGbWNJTHpNRG16cUVhTkRETDlmTDVlckRIc0k1a2pqK05kNGp2NE1kcnZrTkg3V2V5eFhvYUZMOXZsRVZFck9ZaThibUVDeTdPcTQ4YktVVjYzWmN4M2F5NWNlL3FwYkRCRmVHUkg1NGF5d0l3NWl2L2hVYkRmSEdSSFRzZ2ZTYW5MZ3ZrRDBucGZiQ2d3Q0R2ZWZ4SzBWTGpzeEMzK2xuRDlsTXNGM3JqRExzZFZqVEJxUS9WbGVtMHFrSjRrY1lCK0liRFcwbmNaSzZzOEtuNDVBNW5HUkJWTkd6bHhHZkd5K1BkNXJkbVdvMlBVTW96eWl4NDB2Y0RPaUswdURKVDBYanlFRm5PVElsaFExMjFyY3k5cDBneWI4emQrRjluN0RaS3d5ZkJaRjB3eFBaWFEzVzNHVWpUeXBqR0xSNCtnWkpUazBIQUl2SWVBR0JMVm53R2R1d0N1M0xSN2lmYmViMjlmaWlCN1h2b1hBUFZXVW1CUzhuM1FMWktpQ2F2dDNsRm1tMGs2MjJKamdIeDFLdElJMVY3cS8yMzJmT3RhTlVMZUNYS3lzd3RJTmFRdWlYbW5LRlBFRVRCYnhCT04yYlB6QWNqc0xzSFlBRG9kY2RvcWo1RmlNcU9IZ1RuYUdTc2RCbUR0Yy9rbFRSS2VhdnYrV1VUWEIzalA0M2RaeUc3eHhpOVd3bEtMakxoWVBDc2l1aUVFK05GR1FMaWg4WnZNSWk1Z2xPSnpqNFpCSUI0cUE3Q1dUZDM0M2dTSkppR1kwSEYxNHFEaXI3NHc5SjI3U2JLT1VYRGZBM3ovQ210QURvT0pMdTZpZkU3NWl0eERjSGpKNFNBUEpGVlY5dFJrZEVUejRCVTNhTjV0SFdvQkNzbiszcUkwb1o2WUxRcnE4a0w1dWtRRW9MVjhhdGRJZGYzb004VnVJRm0vMVNmMWQyMnhZdGRzZEhoVFJhbXZWVlB2b3lMcHF2LzJCN2cyUFdLcEVESFpQT21tVmVMSDIyeGd2WjlHMC9Tc08yR01LcHBtL2t3VzRLRHhZWlVjSCtWeFByeVE5NzlCRVVMdzl1Sll6cEpDZmVybmQ2cmtyWVltUWVydU9UN29QQ0RGRlYiLCJkYXRha2V5IjoiQVFJQkFIaGZyRlEyYUlJd0Y1VmM3OVJIRVBHbmNVV3VyMi9Kek04dC9aem9FdFJyQWdFbzJvOEkyRzQzUWtHdkZtYmpMNzJmQUFBQWZqQjhCZ2txaGtpRzl3MEJCd2FnYnpCdEFnRUFNR2dHQ1NxR1NJYjNEUUVIQVRBZUJnbGdoa2dCWlFNRUFTNHdFUVFNMzlsQlQxZEdTWi9McFNXS0FnRVFnRHZUSHlJaG1UTzRzd3U3RW9OTlFZdnJqT3F6ck15YVNTaytVeE5xdTEyMlF0czdiLzIwNzdBYnN4K2VTaE9lZGVvbGJVTzNyMThUbHNDS1JnPT0iLCJ2ZXJzaW9uIjoiMiIsInR5cGUiOiJEQVRBX0tFWSIsImV4cGlyYXRpb24iOjE2MzkxMTYyMDl9 740126133497.dkr.ecr.eu-north-1.amazonaws.com"
artifacts:
  files: 
    - "**/*"
  name: "s3-to-s3-latest-build.zip" 
version: 0.1
