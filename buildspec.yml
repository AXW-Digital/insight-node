---
phases: 
  build: 
    commands: 
      - "echo Build started on `date`"
      - "echo Building the Docker image..."
      - "cd server && docker build -t axw-digital/insight-node ."
      - "cd server && docker tag axw-digital/insight-node 740126133497.dkr.ecr.eu-north-1.amazonaws.com/insight_front"
  post_build: 
    commands: 
      - "echo Build completed on `date`"
      - "echo Pushing the Docker image..."
      - "docker push 740126133497.dkr.ecr.eu-north-1.amazonaws.com/insight_front"
  pre_build: 
    commands: 
      - "echo Logging in to AWS..."
      - "docker login -u AWS -p eyJwYXlsb2FkIjoiQlRpNUw3OFNHVW9aRElha1AyanhOUWE3aHY3Q0Z2K0RPT3BzTFVRaGUreUtwWFFHVnE2UTUxZVNpSDUzbklBczlxNWNhVWVBcFZRTVpIOGhGT3QvdDVaTnFYL2F1dkJJWVVLWE1nMndscG84clZuRU5kc1ZaRWNLWnk2OHkrUlp2eW9EcWFaRnBuL1hLVjQzT1l5Z2FqUE5TTlZXbmkyNFJlZjNzdWpRbFJIMFFETjFsejA5NElqSDJxTG9XZW1mZ3Jxc2loWVgwVi9FeTRkZUd0blhHakk3bklBNGZYUjdOa1NWdXg3QkhVZmRZZElBRFkvWU9XQ1RGNDVwQmVBV1M4V0c3c1B3NCtEOFlYU1I3YU5oL1BGUFdmRllVR2JnMXBwbzBuZlpsZ1hFWU9ReEN1ZU5ZSHRwUGtnZUFnRXlmWGYxQktzbURvWTBYbjNnTGhLVHFGUVRlY0ZEdGpDY0ppOEVNRmNIYjNIR2syRVhnallxdjA3bEpIOGpoVDlQbmRYUkNTTWRNbWtUb0hDTWFQNGdjYTRZcm1CL083dzg0KzN3QjBPL24zRmhtSVRrZkZ2ZEkrWXpMS1U2OEVaVFozV0kxQk9TVmNjTW9qL05wdDFSSlRUNE5WeTIzaDF6bnZFY1N0UVhSUzZ0ZWErbElWc1hDR1BnYmg5dkY4aXE1aUNVck94UTFicE5wVTBzWll5Z3VBZTcyYjFGL3o3aGpWQWlYTnJ4YUJoZ2YrQjFMbXM0aWkvVkhaRksvN0NOb1N6ZUZmZk5WZ2pLV2NyZXJycGJSNUxweWdVQWtoMENobWJmRmF1SldzN0ZnTDE3OVhMbDBqdmVZNFhPZWQ0Y05PTmJ1TzJwWGVsZldhKys3cVh0SDA5N0lYZkdkOVBpd1RkYWptc2txVXM2eEJiMERUV2JVUEdEdlkvMHhwbnJPdU9mcmtnRFJYSUo1NjhjZEtiOFNMWDVjK21vSmdjNWtPSGxTNm8rajNibmNHSDYzUjlXZEFkRFY5MWIxNWZBSnJjOW5hN2VlWTE3MERWbFJtb2h1c2w3NUdtaXVHTWllOTM1c014V2Y3UklYTVl6NnBuZDBvcWhlNnBWUy9ra09OTW1ta2dubEtrSlJjVjdzUjdaYmZlSXdjOGRvZzJhZWlicGZUYUJlQXpRR2tOZHZ4ZTlTZWZ3SDFIRVg2UXdxWnllY09qeUdOaW53cURHV1VjNG1qZEhNNzg5U1lMT0xUVi9WN05VR3RubW01WEZQTmtTM0RVWnkzcHpIL3BoR1RBRE00bUZGa2JaUDJGQmlZa2hHN082QmZoZGtxVk85NHhFRlM2WVlpN0kiLCJkYXRha2V5IjoiQVFJQkFIaGZyRlEyYUlJd0Y1VmM3OVJIRVBHbmNVV3VyMi9Kek04dC9aem9FdFJyQWdFcEVqSDBGZEpLNkNmSjFiTWpPOWVoQUFBQWZqQjhCZ2txaGtpRzl3MEJCd2FnYnpCdEFnRUFNR2dHQ1NxR1NJYjNEUUVIQVRBZUJnbGdoa2dCWlFNRUFTNHdFUVFNYktBcmlLV3h4bFVJQ0Iwb0FnRVFnRHNpZmRWVXA1WTVwRU5teW5KaklOS0dYaGw3UngzNG9YSElXaGFEQXA3MTFLcEZUMllmSGd4VjVORXlLK1pWdGRLNUtQZVlNVFk1UE9YYlZ3PT0iLCJ2ZXJzaW9uIjoiMiIsInR5cGUiOiJEQVRBX0tFWSIsImV4cGlyYXRpb24iOjE2NDg2OTExNzB9 740126133497.dkr.ecr.eu-north-1.amazonaws.com"
artifacts:
  files: 
    - "**/*"
  name: "s3-to-s3-latest-build.zip" 
version: 0.1
