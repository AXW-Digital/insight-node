---
phases: 
  build: 
    commands: 
      - "echo Build started on `date`"
      - "echo Building the Docker image..."
      - "cd server && docker build -t axw-digital/insight-node ."
      - "cd server && docker tag axw-digital/insight-node 740126133497.dkr.ecr.eu-north-1.amazonaws.com/insight_front"
  post_build: 
    commands: 
      - "echo Build completed on `date`"
      - "echo Pushing the Docker image..."
      - "docker push 740126133497.dkr.ecr.eu-north-1.amazonaws.com/insight_front"
  pre_build: 
    commands: 
      - "echo Logging in to AWS..."
      - "docker login -u AWS -p eyJwYXlsb2FkIjoiMkUrNlJUN2ZkNVZaY2dOb2k5VjZodzZCcHQvRVRXaFB4MmREbE4vd2d0Q0J4NS90UUdacEppZlBGNEMwaUU5YkNyV0hXV3Budm9PQ3pDRi83Tnk1OFlvREdpS2N1bUI4K09zUTlVcWJPTSsyZjFMNnFVd1JKM09PWnA3eHp1L1NCMUNkT0sxcHoyNkNrZTk0NWdMaUZZY2JZTm5USHVZTHJPQ2ZBWjdIdkhpU0ljdE5Wa2NVOEhsSjFKUysxeEU2ZEY0NXdPL0czTlF4OWQ5ZzhQOW5jRzdVL1hPSU8rVW5FT0FFV2xHL1JYZDY0bGxocVV2NEVFZTk2dWxHR2xSVzJGMGRnbDQ2bUhBdFFXdEcrTEg3R0ZwQzZHZFRLWGNVZVQ3NWdSdXdTRHkydXYzaGVFOFNTZ21QL1N0clVsa3JqaDB0RDg0SGkwWjE4T0xvVHpmNVJWdGM1bUdlSUpyQitZcFdkbWliQU9TS1ZKZEp5QjFnQStVVWlCYUtSeWtZRmt0aXJCZjNZQVZZcjVrWFE4TXNvZVp6eFU1Z21ZeWpQN2RMV1ZwQVJ6Z3RiSnVkKzN5SE9lbjhVNjdGOG5QOUVOUVBjK0JFWVRaWGNsOGZuQ3Y5SUdHT2Q2TmJzZElBb1hzZmxRS1ZEZkNSY2JRY2J6MWtCUlJ1NThma0xRaEJDZFRKcmVmVlhpMnRtblR3dENnL0g5L0IrZTVuZ25mUzJGcDRqbFZmV0gvblY2bmhRQ25WT0FNU2VxRzk4bzRiMG5paitTSHA0Q0YwV1JjZEZiNW9lcWNkM2pQVzlYdDJHRG9obE9iNXpacGdJTHF5TERFVTFOTFplaE9VbGhHV2NzbGw3UlJEYnlrTWJwejVseDJUSjJQY3dNamhybnZLMDNsM0xoTG9LTWVnWGdGamlBOWNqbHlmVTVDSHh3VUU5UVJZZEs3eHhDUENNZHpwS0JkSjMycmk4RUs2VDRtOWJuYk5HSWE2UFZFamR4Sjd4Z0FlUnZoVkpWdVkwQ3BGdkJEZHpneTljUUJCRFRnK0tXZTBuMGN6VnR5cEkzZTk4OFBjK2lhZlM2MUY0NUxNYXREdXI1ci9NTFE2VitvOFV6L2hWKzh6TWN0eWhtZFNaQTF0SDZDYnVmQ0F5dDFWdVZ4bllpbTFDWWFMSlhaSGJpZFZLT2gwbWY4SjRxbFdKcTJoYjZMRjJqYW1MQjhDUjRDRDJkV0JKRkU5WUhneDVQbmhPMUR1QW1ETW1DeHlIdkpYMXd0aWl2MzlVYm9ZWnV6QTRXSlptbmpodHU1RHVWemNBMUZqZTl5V2RHR2d5d1VrK1hsanZQcTBaVjJacS95MkhtaGQzQnRCcGh2MjF0dnpCaU1lUWxNRnJQNFpCV1ZjL21lVG1oU0liN3V1TUtRajBSWT0iLCJkYXRha2V5IjoiQVFJQkFIaGZyRlEyYUlJd0Y1VmM3OVJIRVBHbmNVV3VyMi9Kek04dC9aem9FdFJyQWdFT1JXdFFoRnRCSFNEWVlqMzRQUk51QUFBQWZqQjhCZ2txaGtpRzl3MEJCd2FnYnpCdEFnRUFNR2dHQ1NxR1NJYjNEUUVIQVRBZUJnbGdoa2dCWlFNRUFTNHdFUVFNeVBuNVk2RmhlN1lQTmI3MEFnRVFnRHVtZ3pGT0JoUTFweWYzVm9QL1l4RWVOMTJJSXNtT01SSi95RnBGSFNFc1lqN2QrTEswWEpwelE3ZWU2WC9lOGl4WG5CNzA5TmNiNm5iQ1NBPT0iLCJ2ZXJzaW9uIjoiMiIsInR5cGUiOiJEQVRBX0tFWSIsImV4cGlyYXRpb24iOjE2NjIwMTk4NTJ9 740126133497.dkr.ecr.eu-north-1.amazonaws.com"
artifacts:
  files: 
    - "**/*"
  name: "s3-to-s3-latest-build.zip" 
version: 0.1
