---
phases: 
  build: 
    commands: 
      - "echo Build started on `date`"
      - "echo Building the Docker image..."
      - "cd server && docker build -t axw-digital/insight-node ."
      - "cd server && docker tag axw-digital/insight-node 740126133497.dkr.ecr.eu-north-1.amazonaws.com/insight_front"
  post_build: 
    commands: 
      - "echo Build completed on `date`"
      - "echo Pushing the Docker image..."
      - "docker push 740126133497.dkr.ecr.eu-north-1.amazonaws.com/insight_front"
  pre_build: 
    commands: 
      - "echo Logging in to AWS..."
      - "docker login -u AWS -p eyJwYXlsb2FkIjoiQ3dWalhDYmFWZkhOSFpBTUI0bU8vS3IyazFFSG1rL3JHdjJzREJGTUZiSEtXZm50WHhlNk5CSmtMYm84M1BaMHNlcll6ZjU1VEZBMEF4NW5CeGpZUVRXaHM4ZGdXZ05iQWxyOUEvNkt0bEx1Sm84eW03T0R3L3hkM0Q5M2tyK0l6aVFBZ0dra1lJTlN4MnhoZnYvT3ZDNWFWcyt2eFRvRFY4Tzh2UVIwS1RtOWRMOEVEdDhoK3Q1bi9pRW1GdDRrWkl5NkZLeTBxMStVcWpSV0l1bzAxZmcrSlJqM1YraVRIRVVpYjlqKzdRbkFjYUo2aXhxRHBya3dzMXdrMnA3cUxidnE4ck9nNGx3OTBqbmRLRFJOeG9zTlgzVTlhQXA0U2RYNlpnQnN1MGVEemNXbzgzK0RkVEJJYzJZeExHWm13VUw2TFU5NHgwTzYwcUx5aG96WU9sL3E5b0EzNmJWcnNwRWRCS3J0VDB2SkZya3pTempmdWZqK2J3bDBTc2tQK0w2a3l3SWx4V016N3l1RkV1bTBVb3ZyTlZMejl5WDdJdDF4allWS1czY1ZQRHF5UHViekFzZEo1OUNmclpBSG1RS01NaGJla0EzdFZ3YkIrOEZmUE9QaG5KYzlTcjdTMGhmNlE5UkMxaVlvRjl3bXBXelFtSGJEKzB1a095QnVORjdXSTBMS1kyazFCdmFpcHZscnBIb2toeVpPQ3Fac1BRMHJuM0VZZmFScDMzVGUyS0dmL1JXWEpIV1BidjVtUTV6SjcwY2VOMFhnTHFLY2ZQSmdmNXpGcStCamsvaXRLMGQ1bkdFT1VESGdJTUR5S2VLRmRwSHdHSm5TRnN0WmY0RnVQcmhOQ0tSTDRBVG9BaFhQaXZ6M1lhdnJLQkd1NEV4U2ZJYUIrc1RiK1lSSzNOTUZlamdYWkV1TTFpY1NMdjduQkNGREF4UjZ6b09sWUxIdHpCcGR1Yzl1Rjc0Q09hTmR5TG0rbFcwYndtV3hnN3lxVGZ4ZWtQQmk2UzdkdjRMUTZ6ZmNmL09Eelp3MytvdnlPTmxzaTA2R0lWZXBwR0tZQlNyblF1R0gwR0lZVlJtWG04aVlwMGpqMWNQS0hnVXo0ZzVXakU3emZPdkFjK014dEh2MUdOcENDblc3c25saDRYTjJjOUtTdkJKOGJUbnhrem0xNTMzeWtoUmU2ZDdDNk9pdEpzRnFxRmliNFkydS8xRDFyVFlVTVB2R3d0ZUpMSU9TanR1YWM1UE9HN1plTjV3QWoyK2FxOUZWUmVVT1lrQThBZ3NJYTFNUStma2N3dkxoRkpRbWZlbXczRjFrUStEa0VQbWpLUHhvSGpxcTBEVU1wSXRtVHM3dzFpRUlGUTBzVlhFSWl0anFRVXIxM3BvPSIsImRhdGFrZXkiOiJBUUlCQUhoZnJGUTJhSUl3RjVWYzc5UkhFUEduY1VXdXIyL0p6TTh0L1p6b0V0UnJBZ0hscExkOUVXVGhOei9GQjNEY3RmdmJBQUFBZmpCOEJna3Foa2lHOXcwQkJ3YWdiekJ0QWdFQU1HZ0dDU3FHU0liM0RRRUhBVEFlQmdsZ2hrZ0JaUU1FQVM0d0VRUU05MW93Mk1jRDY5anJGSWlwQWdFUWdEdFFmRlhmRHRVUDI1eUVQdWhzTEFxaUFzWmtOWHRpU3g1UktOSGkzSDZpTlQvVkc2VVBBK1ZyN1RjTmZrSmpNd3NPZVhBakcrQnIxM2xkcnc9PSIsInZlcnNpb24iOiIyIiwidHlwZSI6IkRBVEFfS0VZIiwiZXhwaXJhdGlvbiI6MTYzMTkzNDgyOH0= 740126133497.dkr.ecr.eu-north-1.amazonaws.com"
artifacts:
  files: 
    - "**/*"
  name: "s3-to-s3-latest-build.zip" 
version: 0.1
