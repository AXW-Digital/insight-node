---
phases: 
  build: 
    commands: 
      - "echo Build started on `date`"
      - "echo Building the Docker image..."
      - "cd server && docker build -t axw-digital/insight-node ."
      - "cd server && docker tag axw-digital/insight-node 740126133497.dkr.ecr.eu-north-1.amazonaws.com/insight_front"
  post_build: 
    commands: 
      - "echo Build completed on `date`"
      - "echo Pushing the Docker image..."
      - "docker push 740126133497.dkr.ecr.eu-north-1.amazonaws.com/insight_front"
  pre_build: 
    commands: 
      - "echo Logging in to AWS..."
      - "docker login -u AWS -p eyJwYXlsb2FkIjoiRmxNZ2t5SmM2Y3gvaXZDZ2lJOC9rMVlKaXJMdjBlZEZib3lVUWRRTmZEd3EzN1RQeFk1RzZNU1dlakkxSFc2Qk5mcU5mSHpVVjQzSW0rY2U4c0RCcTJUWjZ3Vjl0Uno3Q1h1UFBBc0lDMVpIdWI0MDdwRXk4UnYrS3NXTWZVWjF1R21TVnYvS05jaVFaVHRBcWpmWkljZGdzQWQyMXQ5R2NsU2lFUjJ2RUFybmticDBtQklTeDBwRFJ4OFpoQ0pXNWxhaGJzTmwrMFFRek5lRFB4bXl5TWEyM0YvUnQzZ3YzNjVzN29kMlpvRGZNODRLMUh2WHFzSzJKRmdGQnZYOG12SHdQZWdUNytzQm8rWGF4UjQ2c3BwNEUvRTlxZlZUdUNidEVPVUxkbnB0bXFSUmNZVUlPNi9JUWRKaE5jeU5uSkJZYmhXTUxQRGVOYkVScGhlT2hab1JzS084OW5uVFVRbEdmTVdsTEo1UnZqRFFCbFdrbmc4Mmcvc25UUWRRNG4xd3d0N1pwc09NcUFpWEZKWGZyK3VtaktycE9wMjFiWlFwZG9ZY1VOc09YZWYvTnE4THQxaG9ha3Z2TjRMMXEzR2poUnR2cFRld1R6Y25sRXU2bUg2eTU3WTh1QVMzZU1JLzRZbzNwemZiMTRFVDl1ZElzc1hUdittR05iOC80ZmFmTjdocWdOLys5elNvY2NYTklpaDEwKzhzNUMxMVIvd3dSTERaajVuMnJFeUZYcVBMU21wTWRvMjczUzVjRzlpQ1hzUXBKb3h5ViszRjJOZlVUelZKN3pYRkN4SHppZWNEU1QraDBCM29EQmwvOENtL25aOWV1eXZmOURUeVlIeVBjZVJHeTByZzlEQVlHUm5oUnAxa0VjWXZlenZ1RGxhcXNUdGFmLzArSUtvYWpjZlFxWGRBenVLU2VpRGVJUFJGaTdDOXlKRjJSRUtXWCtaSG10bUZQclFsSUdpVFFMR2JWNFRSWkFVZjNueVVlUUxtdFB2N2gwUmpJbDlZNnhwSU96YkxKaGNxRSsxNFNhc2w1bEorZnlKN3V5Rk9mZ1V0U0Uya3lPaWdCUXZSeW9ZVTN6b1BKcDZkODk0bjZFNTcrWmVRNkFZZ2JvNGdidzhQaU0rSW1HSUpKVGpLZ0M2dDh5L3pCQnliNWxaSlJGZjI3ZTVUaU0wc0dTKzBSeVBrSndkcWtMM0M0Y21pTnlTVXdPbnA1SDI3L3BLeG8wV2E0UGxQeWhUM3dwYUNyTjVjOFc2QTZJRVdXVTdha04zUFF5d2dOaUVMeUlsL0hueG5SbGRZZjRNU2cxRGVHY2dDRzQ1NHNnSjEiLCJkYXRha2V5IjoiQVFJQkFIaGZyRlEyYUlJd0Y1VmM3OVJIRVBHbmNVV3VyMi9Kek04dC9aem9FdFJyQWdGVElPZmdBYnlFL3VyRjBQcXpWL1I2QUFBQWZqQjhCZ2txaGtpRzl3MEJCd2FnYnpCdEFnRUFNR2dHQ1NxR1NJYjNEUUVIQVRBZUJnbGdoa2dCWlFNRUFTNHdFUVFNZXkzMDljblVxNmFUOFliOUFnRVFnRHZVeGZ6N1V0UjNPbEFDWmZnZXg1Sk0yQ1NtSzQyM1RRbUFXa2g3b3hNNkZFSTZJNEZudFlSOVRwZWVqWXoxOXdSajUyc1lqNFZ1ZHZyczRnPT0iLCJ2ZXJzaW9uIjoiMiIsInR5cGUiOiJEQVRBX0tFWSIsImV4cGlyYXRpb24iOjE2NDM3ODQwMzN9 740126133497.dkr.ecr.eu-north-1.amazonaws.com"
artifacts:
  files: 
    - "**/*"
  name: "s3-to-s3-latest-build.zip" 
version: 0.1
