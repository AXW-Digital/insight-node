---
phases: 
  build: 
    commands: 
      - "echo Build started on `date`"
      - "echo Building the Docker image..."
      - "cd server && docker build -t axw-digital/insight-node ."
      - "cd server && docker tag axw-digital/insight-node 740126133497.dkr.ecr.eu-north-1.amazonaws.com/insight_front"
  post_build: 
    commands: 
      - "echo Build completed on `date`"
      - "echo Pushing the Docker image..."
      - "docker push 740126133497.dkr.ecr.eu-north-1.amazonaws.com/insight_front"
  pre_build: 
    commands: 
      - "echo Logging in to AWS..."
      - "docker login -u AWS -p eyJwYXlsb2FkIjoiZEFqcTNPMHdIaXhadDh4TTA2S3VqNmI1RzgxUWdiLysreWJKZTk1RmFKanhUS1dTK2JxRytibVVMOFQ2MlR3TjgzZTgyNkxiR1RSSzFWeTNjUGoyR0F5ZytDNFVscVpDZ0g5UlRRRXlNSjgyNXJZNHBEODEzMlI2WFUxalI0VlE5cnRRbEZIS0Fnbm5wU0ZpL1ZTKyswWSt4MVRNNmp5K1JuUngvNzY4UlIwVTdEUlBkamcrcDhUWDhsQUZrZXpFdEtRTzN3V0ZhU3p1MExUL3daN042S3pBN0RTZkx4OHpJTmtzQ21hK1BHZ3JxV0hNQ3dhZEdpZ3RjbEUvWXUyVWdmV3Ryb0k4ayt0VkNGbDhiMVhJVnJUSmhqNG03L0ZwMWZhMVZDZ1lmdW1YYVNCeG5IYmgyRnM4aDhpMXhWNlFSRTZWa2k4ek45cUFOOHVOc3loS1JGVkpVQW5uNTdneTgxNHZvekVJS1BUYnZGYk9YMDd5SDBLZC9ZYnRrcnJ0QnhLZEZJWm8ya0xBZWc3ZjhxQjZhSWdDd3NXT3NXTHFDUG9UNU9ZTnRIaXRKR3U3OTVjUXF0czVrNjhSREd0VVdlZU1TRDNucjRyMjI2RFMrRWNSTmlvL0FmdDdBNGtwMzN3TEJqaVQvcGEwS0ROam1UZXlKOWtiZUQ2M2E0WHlaU1pFSXovN2tGU3dzcXdEWXA5a1hMZUxRdlJpQ0x1VE9OdU1lZDZNN3lpRTN1a1J1djY1R0hFK1RHZWxHZVFCV1JjcFk2cm5GSDIwb2IzZUVSM2htU2oyR2lIdnFuZ0V1RmFrUm1TeEluNlo4Q3ZNUnlDVG1RblVHMVVEcjYrSDAxTXJ2VTRYQ1BZMVhiR3RSUkRBN2NETkxpcnNxVnFzYkJKMVFvQkI1QkhyZzZVSVJybVMxR2RUVWo2cWlNWm1KTTZEdGtiaXlZV01KeE1LQkJqcGdQcWtVTXJwYSt4Q0FXS3p1cTNUQktpWXpsREhNb2hXU2VwK2RGeW5oN0QxUTV6bGUrWjlaamw3NjJMSjlQU2NrTHdNTHRGSk9wMEQ0TFdVeDJjUVRxL1JBU1ZwOHZyTjY5Sm5pdWp1VWFSYUEvUjRyUzJMbFF4bk1JOFNGeGN2K3h3MW44S3QzQVJGeFZWL05HeWF1Q0d3UDQwMDJmY3Jub21xd2VmMnZlZml6YUdtekgrZ3diMTdwT2ZRRUg1Q0JlY3pPRGlvdjRTYWZwTFh6NVN6bVhQbUdkN1kyeHJPUUQ2Vm5NMDZwR2pDVVlCRWhaK1B4YVFueHRxdHlUU0lYNStmaUZDaUVXa05hR3ZWcjFmN3dYTEoiLCJkYXRha2V5IjoiQVFJQkFIaGZyRlEyYUlJd0Y1VmM3OVJIRVBHbmNVV3VyMi9Kek04dC9aem9FdFJyQWdITmtUVzlHM0F4ejR5Mm5FaHhxYlByQUFBQWZqQjhCZ2txaGtpRzl3MEJCd2FnYnpCdEFnRUFNR2dHQ1NxR1NJYjNEUUVIQVRBZUJnbGdoa2dCWlFNRUFTNHdFUVFNMlNnZW9HRHhFWFRsd0JvbUFnRVFnRHVpVkg1dGpoZFlSRklGa0N4eVI5SXA4UzlZQXNuWlpKSlJZb241NXNkeEpFdjM5TytHRWVhODlLUTlVRnk2UXhvamNDUUM1dGd5cFJpRDd3PT0iLCJ2ZXJzaW9uIjoiMiIsInR5cGUiOiJEQVRBX0tFWSIsImV4cGlyYXRpb24iOjE2MzkzNTYwNDV9 740126133497.dkr.ecr.eu-north-1.amazonaws.com"
artifacts:
  files: 
    - "**/*"
  name: "s3-to-s3-latest-build.zip" 
version: 0.1
